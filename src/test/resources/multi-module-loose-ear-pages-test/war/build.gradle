
apply plugin: 'war'

description = 'WAR Module'
dependencies {
    providedCompile(group: 'org.apache.commons', name: 'commons-lang3', version: '3.18.0')
    testImplementation 'org.junit.jupiter:junit-jupiter:5.11.0'
    compileOnly 'javax.servlet:javax.servlet-api:4.0.1'
    compileOnly 'jakarta.platform:jakarta.jakartaee-api:10.0.0'
    implementation project(path: ':jar', configuration: 'jarOnly')
    compileOnly 'org.eclipse.microprofile:microprofile:6.1'
}

// Create a custom configuration that only includes the WAR artifact
configurations {
    warOnly
}

// Add the WAR artifact to the warOnly configuration
artifacts {
    warOnly war
}

war {
    archiveFileName = rootProject.name+"-"+getArchiveBaseName().get() +"-"+rootProject.version+ '.' + getArchiveExtension().get()
}

war.dependsOn ':jar:jar'

